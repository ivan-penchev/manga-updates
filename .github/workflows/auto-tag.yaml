name: create-release-tag

on:
  workflow_dispatch:
    inputs:
      nextReleaseType:
        description: 'The type of the next release (choices: "major", "minor", "patch")'
        required: true
        default: 'patch'
        type: choice
        options:
          - major
          - minor
          - patch

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
      with:
        fetch-depth: 0
    - id: git-describe-semver
      uses: choffmeister/git-describe-semver@main
      with:
        version: latest
        dir: .
        fallback: v0.0.0
        drop-prefix: true
        prerelease-prefix: dev
        prerelease-suffix: SNAPSHOT
        prerelease-timestamped: true
        next-release: ${{ github.event.inputs.nextReleaseType }}
    - run: echo This is the version ${{ steps.git-describe-semver.outputs.version }}